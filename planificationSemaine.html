<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <title>Planification Semaine</title>
    <link href="./CSS/planificationSemaine.css" rel="stylesheet">
    <link href="./CSS/bootstrap.min.css" rel="stylesheet">
    <link href="./CSS/jquery-ui.css" rel="stylesheet">
    <script src="./JS/jquery-3.6.0.min.js"></script>
    <script src="./JS/jquery-ui.js"></script>    <!-- doit être APRES ! -->
    <script src="./JS/require.js"></script>
    <script src="./JS/planificationSemaine.js"></script>
</head>
<body>
<table>
  <tr>
    <td class="barreMenuGeneral" rowspan="3">
      <p>
        <a href="planningRessource.html"
           title="Poser des contraintes sur des ressources 'prof'">
          <img src="images/lock_verrou.png" width="60"></a>
      </p>
      <p>
        <a href="#" id="addProf"
           title="Créer un nouvel enseignant">
          <img src="images/prof.png" width="60"></a>
      </p>
      <p>
       <a href="#" id="supProf"
           title="Supprimer un enseignant">
          <img src="images/profenmoins.png" width="60"></a>
      </p>
      <p>
        <a href="#" id="addSalle"
           title="Créer une nouvelle salle">
          <img src="images/porte.png" width="60"></a>
      </p>
       <p>
       <a href="#" id="supSalle"
           title="Supprimer une salle">
          <img src="images/salleenmoins.png" width="60"></a>
      </p>
      <p>
        <a href="#" id="makeCSV"
           title="Fabriquer le CSV de la semaine en cours">
          <img src="images/make_csv.jpg" width="60"></a>
      </p>
      <p>
        <a href="#" id="lancerMoteurCalcul"
           title="Lancer le moteur de calcul de l'EDT">
          <img src="images/moteur.png" width="60"></a>
      </p>
    </td>
    <td>
      <div id='entetePrevisionnel'>
        <span class="titre">Semaine n° </span>
        <input type="number" id="laSemaine" style="width: 4em" onchange="stockagesemaine()">
        <span class="titre">&nbsp;&nbsp;&nbsp;Nombres de créneaux du planning : </span>
        <span class="titre" id="infoNombreDeCreneaux"></span>
        <script type="text/javascript">
          function stockagesemaine(){
            var num = parseInt($("#laSemaine").val());
            localStorage.setItem("num", num);
          }
        </script>
        <!-- localStorage doit permettre de stocker en local une info du navigateur,
             ici le dernier numéro de semaine utilisé, puis de le relire à l'ouverture -->
        <script type="text/javascript">
          document.getElementById("laSemaine").value = localStorage.getItem("num");
        </script>
      </div>
    </td>
    <td>
      <div id='enteteFormulaire'>
        <span class='titre'>Ajouter un créneau&nbsp;</span>
        <button id='btAjoutCreneau' class="btn btn-success">+</button>
      </div>
    </td>
  </tr>
  <tr>
    <td rowspan="2" class='celluleZone'>
     <div id="previsionnel">
        <ul id ="dep">
          <!-- TODO: rendre la création des onglets automatique -->
          <li><a href="#previsionnel-0">GIM-1A-FI</a></li>
          <li><a href="#previsionnel-1">GIM-2A-FI</a></li>
        </ul>
        <div id="previsionnel-0"></div>
        <div id="previsionnel-1"></div>
      </div>
    </td>
    <td>
      <div id='formulaire'>
        <label for="type">Type&nbsp;</label>
            <input type="text" id="type" name="type"><br>
        <label for="matiere">Matière&nbsp;</label>
            <input type="text" id="matiere" name="matiere"><br>
        <label for="prof">Prof&nbsp;</label>
            <select id="prof">
                
            </select><br>
             <label for="lieu">Salle(s)&nbsp;</label>
            <input type="text" id="lieu" name="public"><br>
        <label for="public">Public&nbsp;</label>
            <select id="public">
                
            </select><br>
        <label for="duree">Durée (min)&nbsp;</label>
            <select id="duree">
                <option value="15">15 mn</option>
                <option value="30">30 mn</option>
                <option value="45">45 mn</option>
                <option value="60">1 heure</option> 
                <option value="75">1h15</option>
                <option value="90">1h30</option>
                <option value="105">1h45</option>
                <option value="120">2 heures</option>
                <option value="135">2h15</option>
                <option value="150">2h30</option>
                <option value="165">2h45</option>
                <option value="180">3 heures</option>
                <option value="195">3h15</option>
                <option value="210">3h30</option>
                <option value="225">3h45</option>
                <option value="240">4 heures</option>
                <option value="255">4h15</option>
                <option value="270">4h30</option>
                <option value="285">4h45</option>
                <option value="300">5 heures</option>
            </select><br>
        <!-- Champ caché pour contenir le futur uuid des créneaux  -->
        <input type="text" id="uuid" name="uuid" hidden><br>
        <!-- Boutons d'actions -->
        <button id='btModifier' class="btn btn-danger">Modifier</button>
        <button id='btCreer'    class="btn btn-warning">Créer</button>
        <button id='btAnnuler'  class="btn btn-secondary">Annuler</button>
      </div>
    </td>
  </tr>
  <tr>
    <td class='celluleZone'>
      <div id='corbeille'>
      </div>
      <!-- Context-menu de créneau : caché aussitôt via jQuery -->
      <div class='context-menu'>
        <ul>
          <li><span id="actionModifier">Modifier</span></li>
          <li><span id="actionDupliquer">Dupliquer</span></li>
          <li><span id="actionSupprimer">Supprimer</span></li>
        </ul>
      </div>
      <!-- Context-menu de zone (previsionnel ou corbeille) : caché aussitôt via jQuery -->
      <div class='context-menuZ'>
        <ul>
          <li><span id="actionDeplacerToutVersCorbeille">TOUT D&Eacute;PLACER vers corbeille</span></li>
          <li><span id="actionCopierToutVersCorbeille">TOUT COPIER vers corbeille</span></li>
          <li><span id="actionDeplacerDeCorbeilleVersOngletCourant">TOUT D&Eacute;PLACER vers planning</span></li>
          <li><span id="actionViderCorbeille">VIDER la corbeille</span></li>
        </ul>
      </div>
    </td>
  </tr>
</table>
</body>
</html>